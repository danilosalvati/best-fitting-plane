!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BestFittingPlane=e():r.BestFittingPlane=e()}("undefined"!=typeof self?self:this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=r,e.c=t,e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},e.p="",e(e.s=0)}([function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(1);t.d(e,"LSE",function(){return n.a})},function(r,e,t){"use strict";var n=t(2);t.n(n);e.a=function(r){if(!(r instanceof Array))throw new TypeError("This function accepts only an Array of points as input");if(r.length<3)throw new TypeError("You need at least three points to define a plane");r.forEach(function(r){if(!(r instanceof Object))throw new TypeError("The input should contains only points with the following structure: {x:<number>, y:<number>, z:<number>}");if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))throw new TypeError("The input should contains only points with the following structure: {x:<number>, y:<number>, z:<number>}")});for(var e=!0,t=r[0].y,o=1;o<r.length&&e;o++)r[o].y!==t&&(e=!1);if(e)throw new TypeError("Unable to find a plane for vertical points");for(var f=function(r){var e=0,t=0,n=0;return r.forEach(function(r){e+=r.x,t+=r.y,n+=r.z}),{xMean:e/r.length,yMean:t/r.length,zMean:n/r.length}}(r),i=[],a=0;a<r.length;a++)i[a]=new Array(3);r.forEach(function(r,e){i[e][0]=r.x-f.xMean,i[e][1]=r.y-f.yMean,i[e][2]=r.z-f.zMean});var u=Object(n.SVD)(i),s=u.v,c=-1/s[2][2],l=s[0][2]*c,p=s[1][2]*c;return{A:l,B:p,C:-(f.xMean*l+f.yMean*p+f.zMean*s[2][2]*c)}}},function(r,e,t){!function(e,t){r.exports=t()}("undefined"!=typeof self&&self,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=r,e.c=t,e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},e.p="",e(e.s=0)}([function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(1),o=t(2);t.d(e,"SVD",function(){return n.a}),t.d(e,"VERSION",function(){return o.a})},function(r,e,t){"use strict";var n=function(r,e,t,n,o){if(e=void 0===e||e,t=void 0===t||t,n=n||Math.pow(2,-52),o=1e-64/n,!r)throw new TypeError("Matrix a is not defined");var f=r[0].length,i=r.length;if(i<f)throw new TypeError("Invalid matrix: m < n");var a=void 0,u=void 0,s=void 0,c=void 0,l=void 0,p=void 0,d=void 0,h=void 0,v=void 0,y=void 0,b=void 0,M=void 0,w=void 0;h=0,b=0;var x=[],g=[],m=[],E=void 0;for(a=0;a<i;a++)g[a]=new Array(f).fill(0);for(a=0;a<f;a++)m[a]=new Array(f).fill(0);for(E=new Array(f).fill(0),a=0;a<i;a++)for(u=0;u<f;u++)g[a][u]=r[a][u];for(a=0;a<f;a++){for(x[a]=h,y=0,c=a+1,u=a;u<i;u++)y+=Math.pow(g[u][a],2);if(y<o)h=0;else for(d=g[a][a],h=d<0?Math.sqrt(y):-Math.sqrt(y),v=d*h-y,g[a][a]=d-h,u=c;u<f;u++){for(y=0,s=a;s<i;s++)y+=g[s][a]*g[s][u];for(d=y/v,s=a;s<i;s++)g[s][u]=g[s][u]+d*g[s][a]}for(E[a]=h,y=0,u=c;u<f;u++)y+=Math.pow(g[a][u],2);if(y<o)h=0;else{for(d=g[a][a+1],h=d<0?Math.sqrt(y):-Math.sqrt(y),v=d*h-y,g[a][a+1]=d-h,u=c;u<f;u++)x[u]=g[a][u]/v;for(u=c;u<i;u++){for(y=0,s=c;s<f;s++)y+=g[u][s]*g[a][s];for(s=c;s<f;s++)g[u][s]=g[u][s]+y*x[s]}}(M=Math.abs(E[a])+Math.abs(x[a]))>b&&(b=M)}if(t)for(a=f-1;a>=0;a--){if(0!==h){for(v=g[a][a+1]*h,u=c;u<f;u++)m[u][a]=g[a][u]/v;for(u=c;u<f;u++){for(y=0,s=c;s<f;s++)y+=g[a][s]*m[s][u];for(s=c;s<f;s++)m[s][u]=m[s][u]+y*m[s][a]}}for(u=c;u<f;u++)m[a][u]=0,m[u][a]=0;m[a][a]=1,h=x[a],c=a}if(e)for(a=f-1;a>=0;a--){for(c=a+1,h=E[a],u=c;u<f;u++)g[a][u]=0;if(0!==h){for(v=g[a][a]*h,u=c;u<f;u++){for(y=0,s=c;s<i;s++)y+=g[s][a]*g[s][u];for(d=y/v,s=a;s<i;s++)g[s][u]=g[s][u]+d*g[s][a]}for(u=a;u<i;u++)g[u][a]=g[u][a]/h}else for(u=a;u<i;u++)g[u][a]=0;g[a][a]=g[a][a]+1}n*=b;var j=void 0;for(s=f-1;s>=0;s--)for(var O=0;O<50;O++){for(j=!1,c=s;c>=0;c--){if(Math.abs(x[c])<=n){j=!0;break}if(Math.abs(E[c-1])<=n)break}if(!j)for(p=0,y=1,l=c-1,a=c;a<s+1&&(d=y*x[a],x[a]=p*x[a],!(Math.abs(d)<=n));a++)if(h=E[a],E[a]=Math.sqrt(d*d+h*h),v=E[a],p=h/v,y=-d/v,e)for(u=0;u<i;u++)M=g[u][l],w=g[u][a],g[u][l]=M*p+w*y,g[u][a]=-M*y+w*p;if(w=E[s],c===s){if(w<0&&(E[s]=-w,t))for(u=0;u<f;u++)m[u][s]=-m[u][s];break}for(b=E[c],M=E[s-1],h=x[s-1],v=x[s],d=((M-w)*(M+w)+(h-v)*(h+v))/(2*v*M),h=Math.sqrt(d*d+1),d=((b-w)*(b+w)+v*(M/(d<0?d-h:d+h)-v))/b,p=1,y=1,a=c+1;a<s+1;a++){if(h=x[a],M=E[a],v=y*h,h*=p,w=Math.sqrt(d*d+v*v),x[a-1]=w,p=d/w,y=v/w,d=b*p+h*y,h=-b*y+h*p,v=M*y,M*=p,t)for(u=0;u<f;u++)b=m[u][a-1],w=m[u][a],m[u][a-1]=b*p+w*y,m[u][a]=-b*y+w*p;if(w=Math.sqrt(d*d+v*v),E[a-1]=w,p=d/w,y=v/w,d=p*h+y*M,b=-y*h+p*M,e)for(u=0;u<i;u++)M=g[u][a-1],w=g[u][a],g[u][a-1]=M*p+w*y,g[u][a]=-M*y+w*p}x[c]=0,x[s]=d,E[s]=b}for(a=0;a<f;a++)E[a]<n&&(E[a]=0);return{u:g,q:E,v:m}};e.a=n},function(r,e,t){"use strict";t.d(e,"a",function(){return n});var n="1.0.1"}])})}])});